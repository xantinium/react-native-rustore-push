# react-native-rustore-push

RuStore Push SDK для React Native

> Пакет находится в разработке. Предположительная дата релиза `16.11.2023`

## Установка

Для начала необходимо установить npm-пакет:

```bash
# установка с помощью yarn:
yarn add react-native-rustore-push

# установка с помощью npm:
npm install react-native-rustore-push
```

Далее, требуется указать репозиторий, из которого будут получены все необходимые зависимости. Добавьте следующий код в файл `android/build.gradle` (не перепутать с `android/app/build.gradle`);

```gradle
buildscript {
    // ...
}

// ---- Добавьте всё, что ниже ----

allprojects {
    repositories {
        maven {
            url = uri("https://artifactory-external.vkpartner.ru/artifactory/maven")
        }
    }
}
```

## Условия работы

Для работы пуш-уведомлений необходимо соблюдение следующих условий:

1. На устройстве пользователя должно быть установлено приложение RuStore.
2. Приложение RuStore должно поддерживать функциональность пуш-уведомлений.
3. Приложению RuStore разрешен доступ к работе в фоновом режиме.
4. Пользователь должен быть авторизован в приложении RuStore.
5. Отпечаток подписи приложения должен совпадать с отпечатком, добавленным в консоль разработчика.

## Использование

Для работы с пуш-уведомлениями понадобиться ID проекта, который можно получить в системе [RuStore Консоль](https://console.rustore.ru/waiting]). Для этого на странице приложения перейдите в раздел «Push-уведомления» и выберите «Проекты».

Все взаимодействия с SDK пушей производятся через экспортируемый по дефолту объект `RuStorePush`:

```typescript
import RuStorePush from 'react-native-rustore-push';
```

### Инициализация

Для взаимодействия с SDK пуш-уведомлений требуется произвести инициализацию.

Необходимо вызвать метод `init`, передав в него ID проекта:

```typescript
RuStorePush.init("<ID_ПРОЕКТА>")
```

Данный метод следует вызвать единожды при запуске приложения. Дальнейшие вызовы не возымеют эффекта.

Также, функция `init` принимает второй опциональный параметр.

Полная сигнатура функции имеет следующий вид:

```typescript
RuStorePush.init(projectId: string, options?: InitOptions): Promise<InitResult>

type InitOptions = {
    logger?: RuStorePushLogger
    testModeEnabled?: boolean
};

type InitResult = {
    error: boolean
    errorText: string
}
```

Опция `logger` может быть использована для [логирования событий](#логирование-событий).

Опция `testModeEnabled` может быть использована для [E2E-тестирования](#e2e-тестирование).

### Логирование событий

### E2E-тестирование

## Лицензия

MIT
